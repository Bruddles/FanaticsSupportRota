<?php require_once('template/header.phtml') ?>

    <body>
    <div class="container">
        <header class="header">Maintenance Screen</header>
        <div class="row">
            <div class="col-xl-6" id="supportTeamColumn">
                <?php $index = 0 ?>
                <?php foreach ($view->supportTeams as $team): ?>
                    <div class="card my-3" id="supportTeam">
                        <div class="card-header" id="dates">
                            <h5><span id="startDate"><?= date("d/m/y", strtotime($team->getDateStart())) ?></span>
                                ---
                                <span id="endDate"><?= date("d/m/y", strtotime($team->getDateEnd())) ?></span>
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="dev droppableRotaSlot" id="rotaSlot<?= ++$index ?>">
                                <p class="card-text" id="originalDev<?= $index ?>">
                                    <span id="originalDeveloperName"><?= $team->getDeveloper1() ?></span>
                                    <button class='trashButtonOriginalDev' onclick='removeDeveloperFromSupport(<?= $index ?>)'><i class='fas fa-trash-alt'></i></button>
                                </p>
                            </div>
                            <div class="dev droppableRotaSlot" id="rotaSlot<?= ++$index ?>">
                                <p class="card-text" id="originalDev<?= $index ?>">
                                    <span id="originalDeveloperName"><?= $team->getDeveloper2() ?></span>
                                    <button class='trashButtonOriginalDev' onclick='removeDeveloperFromSupport(<?= $index ?>)'><i class='fas fa-trash-alt'></i></button>
                                </p>
                            </div>
                        </div>
                    </div>
                <?php endforeach; ?>
                <button onclick="updateRota()">Save modified rota</button>
            </div>

            <div class="col-xl-6">
                <?php foreach ($view->developerTeams as $team): ?>
                <div class="card my-3">
                    <div class="card-header">
                        <h5><?= $team->getTeamName() ?></h5>
                    </div>
                    <div class="card-body">
                        <?php $users = $view->developerTeamObject->getDevelopers($team->getTeamName()) ?>
                        <?php $userIndex = 0 ?>
                        <?php foreach ($users as $user): ?>
                            <div class="dev draggableDevelopers" id="devCard<?= ++$index ?>">
                                <p class="card-text" id="devCardText<?= $index ?>">
                                    <span id="devCardName"><?= $user->getUsername() ?></span>
                                    <!-- Button here -->
                                </p>
                            </div>
                        <?php endforeach; ?>
                    </div>
                    <?php endforeach; ?>
                </div>
            </div>
        </div>
    </body>

<?php require_once('template/footer.phtml') ?><?php
